<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <LINK REL="StyleSheet" HREF="md.css" TYPE="text/css">
  <title>9. Grid Interpolation and Transformation</title>

</head>

<body>
  <blockquote>
    <p><a href=/gempak/tutorial />GEMPAK Online Tutorial</a></p>
  </blockquote>

  <h1>9. Grid Interpolation and Transformation</h1>

  <p>Occasionally, the vertical coordinate on which data are available in there native format is not the optimum coordinate for performing analysis. Similarly, it is possible that data may not be provided at the desired level for analysis.</p>

  <p><a name="9.1"></a></p>

  <h2>GDVINT Input Parameters</h2>

  <p>GEMPAK provides for interpolating to alternate levels and coordinates through the program <code>GDVINT</code>. Additionally, the grid area may be subsetted to a new grid file using <code>GDVINT</code>.</p>

  <pre><code>GDFILE   Grid file
GDOUTF   Output grid file
GDATTIM  Grid date/time
GVCORD   Grid vertical coordinate
GLEVEL   Grid level
MAXGRD   Maximum number of grids
GAREA    Graphics area
VCOORD   Vertical coordinate type
</code></pre>

  <p>The input file is specified in <code>GDFILE</code> and the output file
    in <code>GDOUTF</code>. If <code>GDOUTF</code> does not exist, then a new file
    will be created with the maximum number of grids given
    in <code>MAXGRD</code>.</p>

  <p><code>GVCORD</code> specifies the input and output vertical
    coordinates separated by a slash. The coordinates
    supported are:</p>

  <pre><code>PRES    --  pressure
THTA    --  potential temperature
HGHT    --  height above sea level
SGMA    --  sigma p
ETA     --  eta
ZAGL    --  height above ground level
</code></pre>

  <p>When <code>SGMA</code> is specified, the pressure on <code>SGMA=0</code> is
    given following a semicolon. For example, if the
    pressure at <code>SGMA=0</code> is 50 mb, the specification in
    <code>GVCORD</code> is
  </p>

  <pre><code>    SGMA:50
</code></pre>

  <p><a name="9.2"></a></p>

  <h2>Exercise #13 (Interpolate to Theta Coordinates)</h2>

  <p>Using <code>GDVINT</code>, convert last night's 00 UTC ETA analysis to a <code>THTA</code> vertical coordinate.</p>

  <pre><code>&gt; gdvint
GDFILE   = $MODEL/gfs/2012110118_thin.gem
GDOUTF   = theta.grd
GDATTIM  = f000
GVCORD   = pres/thta
GLEVEL   = 280-350-5
MAXGRD   = 2000
GAREA    = 15;-150;60;-50
VCOORD   = pres
GEMPAK-GDVINT&gt;r
</code></pre>

  <p>Now use <code>GDINFO</code> to look at the grids on the 300K surface:</p>

  <pre><code>GDFILE   = theta.grd
LSTALL   = YES
OUTPUT   = T
GDATTIM  = f000
GLEVEL   = 300
GVCORD   = thta
GFUNC    = all
GEMPAK-GDINFO&gt;r

...

  NUM       TIME1              TIME2           LEVL1 LEVL2  VCORD PARM
  102     121102/0000F000                        300         THTA PRES        
  103     121102/0000F000                        300         THTA PSYM        
  104     121102/0000F000                        300         THTA AVOR        
  105     121102/0000F000                        300         THTA SPFH        
  106     121102/0000F000                        300         THTA CWTR        
  107     121102/0000F000                        300         THTA SNMR        
  108     121102/0000F000                        300         THTA OMEG        
  109     121102/0000F000                        300         THTA UREL        
  110     121102/0000F000                        300         THTA VREL        
</code></pre>

  <p>There are some new parameters in our grid file. <code>PSYM</code> is Montgomery stream function divided by 100, <code>SPFH</code> is specific humidity.</p>

  <p>Now construct a plot of Montgomery Stream Function (<code>PSYM</code>) on the 300K Theta surface for <code>F000</code>. Overlay pressure contours show vertical motion for air parcels.</p>

  <pre><code>GDFILE   = theta.grd
GDATTIM  = f000
GLEVEL   = 300
GVCORD   = thta
PANEL    = 0
SKIP     = l
SCALE    =  
GDPFUN   = psym     ! pres
TYPE     = c
CONTUR   = 2
CINT     = 5        ! 50
LINE     = 2        ! 3
FINT     = 2/100/220
FLINE    =  
HILO     =  
HLSYM    =  
CLRBAR   =  
WIND     = 0
REFVEC   =  
TITLE    = @
TEXT     = 1/2//hw
CLEAR    = y
GAREA    = us
IJSKIP   = 0
PROJ     = STR/90;-100;0
MAP      = 1
MSCALE   = 0
LATLON   = 0
DEVICE   = xw
STNPLT   =  
SATFIL   =  
RADFIL   =  
IMCBAR   =  
LUTFIL   =  
STREAM   =  
POSN     = 0
COLORS   = 
MARKER   = 0
GRDLBL   = 0
FILTER   = YES
GEMPAK-GDPLOT2&gt;r
</code></pre>

  <p><img src="gdvint.gif" alt="image" /></p>

  <blockquote>
    <p><a href=/gempak/tutorial />GEMPAK Online Tutorial</a> | <a href="importing_data.html">Next: Importing Data into GEMPAK</a></p>
  </blockquote>
<script src="/gempak/add_in.js" type="text/javascript"></script>
</body>

</html>