<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<link rel="stylesheet" href="md.css" type="text/css">

<title>4. Sounding Data Mapping</title>

</head>
<body>
<blockquote><p><a href=/gempak/tutorial/>GEMPAK Online Tutorial</a></p></blockquote>

<h1>4. Sounding Data Mapping</h1>

<p><code>SNMAP</code> plots sounding data parameters at station locations
on a map.  Any level or station parameter that can be
computed can be displayed.  Data may be plotted in any valid
GEMPAK projection and may be overlaid on images.</p>

<p><a name="4.1"></a></p>

<h2>SNMAP Input Parameters</h2>

<pre>
<a href=/gempak/man/parm/area.html">AREA</a>      Data area
<a href=/gempak/man/parm/garea.html">GAREA</a>     Graphics area
<a href=/gempak/man/parm/satfil.html">SATFIL</a>    Satellite image filename(s)
<a href=/gempak/man/parm/radfil.html">RADFIL</a>    Radar image filename(s)
<a href=/gempak/man/parm/imcbar.html">IMCBAR</a>    Color/ornt/anch/x;y/ln;wd/freq
<a href=/gempak/man/parm/snparm.html">SNPARM</a>    Sounding parameter list
<a href=/gempak/man/parm/dattim.html">DATTIM</a>    Date/time
<a href=/gempak/man/parm/levels.html">LEVELS</a>    Vertical levels
<a href=/gempak/man/parm/vcoord.html">VCOORD</a>    Vertical coordinate type
<a href=/gempak/man/parm/snfile.html">SNFILE</a>    Sounding data file
<a href=/gempak/man/parm/colors.html">COLORS</a>    Color list
<a href=/gempak/man/parm/map.html">MAP</a>       Map color/dash/width/filter flag
<a href=/gempak/man/parm/mscale.html">MSCALE</a>    fgc;bgc;mask/units/lat;hide/values/anch/x;y/ln;wd/freq|text_info|t
<a href=/gempak/man/parm/latlon.html">LATLON</a>    Line color/dash/width/freq/inc/label/format
<a href=/gempak/man/parm/title.html">TITLE</a>     Title color/line/title
<a href=/gempak/man/parm/clear.html">CLEAR</a>     Clear screen flag
<a href=/gempak/man/parm/panel.html">PANEL</a>     Panel loc/color/dash/width/regn
<a href=/gempak/man/parm/device.html">DEVICE</a>    Device|name|x size;y size|color type
<a href=/gempak/man/parm/proj.html">PROJ</a>      Map projection/angles/margins|drop flag
<a href=/gempak/man/parm/filter.html">FILTER</a>    Filter data factor
<a href=/gempak/man/parm/text.html">TEXT</a>      Size/fnt/wdth/brdr/N-rot/just/hw flg
<a href=/gempak/man/parm/lutfil.html">LUTFIL</a>    Enhancement lookup table filename
<a href=/gempak/man/parm/stnplt.html">STNPLT</a>    Txtc/txt attr|marker attr|stnfil#col
</pre>


<p>A list of times may be given in <code>DATTIM</code> allowing animation of sounding plots.</p>

<p>The order of the input parameters determines their location
on the plot, similar to <code>sfmap</code>. A parameter
will be plotted centered at the station if it is the first
parameter in the list. If no parameter is to be displayed
centered on the station location, a semicolon must appear
before the first parameter, or the first parameter must be
either <code>SPAC</code> or <code>BLNK</code>.</p>

<p>The following chart shows the placement
of the data around the station.  The number indicates the
position of the parameter in the <code>SNPARM</code> list:</p>

<pre><code>            8
        2   10  4
        3   1   5
        6   11  7
            9
</code></pre>

<p>Note that wind symbols and markers are always plotted at the center.</p>

<h3>Run SNMAP</h3>

<p>Let's start <code>snmap</code> and display the current definitions with <code>l</code>:</p>

<pre><code> &gt; snmap
 GEMPAK-SNMAP&gt;l
</code></pre>

<p>Notice that <code>AREA</code>, <code>GAREA</code> and <code>SATFIL</code>, among others, are preserved from the previously-run <code>sfmap</code> session.</p>

<pre><code> AREA     = us-
 GAREA    = dset
 SATFIL   = $SAT/EAST-CONUS/1km/VIS/VIS_20121029_2132
 RADFIL   =  
 IMCBAR   =  
 SNPARM   = skyc;tmpf;wsym;rmsl;ptnd;dwpf;p03i;brbk:.7:2
 DATTIM   = 2200
 LEVELS   =  
 VCOORD   =  
 SNFILE   =  
 COLORS   = 26;2;7;25;20;22;18;6
 MAP      = 1
 MSCALE   = 0
 LATLON   =  
 TITLE    = 1
 CLEAR    = y
 PANEL    = 0
 DEVICE   = xw
 PROJ     = sat
 FILTER   = 1
 TEXT     = 0.75/22//hw
 LUTFIL   =  
 STNPLT   =  
</code></pre>

<p>Also notice some new variables:</p>

<ul>
<li><a href=/gempak/man/parm/snfile.html"><code>SNFILE</code></a> - the name of the upper-air file, which can be set tp <code>uair</code> for the latest file in <code>$GEMDATA/upperair</code></li>
<li><a href=/gempak/man/parm/snparm.html"><code>SNPARM</code></a> - parameters, analogous to <code>SFPARM</code></li>
<!--
<li><p><a href=/gempak/man/parm/stndex.html"><code>STNDEX</code></a> - stability indices, such as</p>

<pre><code>  SHOW    Showalter index
  LIFT    Lifted index
  LFTV    LIFT computed by using virtual temperature
  SWET    SWEAT index
  KINX    K index
</code></pre></li>
-->
<li><p><code>VCOORD</code> is the vertical coordinate on which to list the data. GEMPAK can vertically interpolate sounding data between the various vertical coordinate systems.</p>

<pre><code>  PRES    Pressure (millibars)
  THTA    Isentropes (K)
  HGHT    Height (meters)
  NONE    Surface data or data on one level only
</code></pre></li>
<li><p><code>LEVELS</code> - level(s) to be mapped for the vertical coordinate specified by <code>VCOORD</code></p>

<ol>
<li> single value  <code>LEVELS = 500</code></li>
<li> list of values(; separated)          <code>LEVELS = 500;550;75</code></li>
<li> a range of values (-)                <code>LEVELS = 500-75</code></li>
<li><p> Key words:</p>

<pre><code>      LEVELS = MAN                    for mandatory level
      LEVELS = VAS                    for mandatory VAS levels
      LEVELS = ALL                    for ALL level
      LEVELS = SFC or LEVELS = 0      for surface
      LEVELS = TOP or LEVELS = -1     for top level
</code></pre></li>
</ol>
</li>
</ul>


<p><a name="4.2"></a></p>

<h2>Filtering Stations</h2>

<p><code>FILTER = YES</code> with filter station data; i.e., overlapping stations will not be plotted. <code>FILTER</code> may also be entered as a number greater than or equal to zero.</p>

<p><code>FILTER = 0</code> has the same effect as <code>FILTER = NO</code>.<br/>
<code>FILTER = 1</code> has the same effect as <code>FILTER = YES</code>.</p>

<p>Filter values less than 1 allow more crowding of stations, values exceeding 1 less crowding.  If a parameter is <code>BLNK</code>, the filter will not allocate any space for that parameter.  The parameter <code>SPAC</code> may be used to reserve the space with the <code>FILTER</code> option so that later calls will plot the same stations after filtering, provided that the same number of parameters is specified.</p>

<p>If certain stations are not to be removed by the filter, these stations are listed first following an <code>@</code>.  The area over which filtering is to occur is specified after a slash.  For example,</p>

<pre><code>AREA   = @iad;hts;rap/us
FILTER = YES
</code></pre>

<p>will display a filtered array of stations over the area corresponding to US, but IAD, HTS and RAP will be shown regardless of the filtering.</p>

<p><a name="4.3"></a></p>

<h2>Wind Barbs and Arrows</h2>

<p>Either wind barbs or wind arrows can be plotted, by specifying a wind symbol parameter name in the list of parameters for <code>SNPARM</code>.  The wind barb or arrow is plotted at the station location according to the type specification, which is entered as described in the <code>SNPARM</code> documentation.</p>

<p><a name="4.4"></a></p>

<h2>Exercise #4 (Simple Sounding Map)</h2>

<p>Plot stations in the Eastern United States at 850 mb for 1200 UTC today. Plot a standard station model for each location. The upper air data to plot include:</p>

<ol>
<li>wind barbs in knots</li>
<li>temperature in Celsius</li>
<li>coded height</li>
<li>dewpoint depression in Celsius</li>
<li>station ID</li>
</ol>


<p>The data are plotted using the specified color list.</p>

<pre><code> AREA     = us-
 GAREA    = us
 SATFIL   =  
 RADFIL   =  
 IMCBAR   =  
 SNPARM   = brbk:1:2:112;tmpc;;stdz;;dpdc;stid
 DATTIM   = 1200
 LEVELS   = 850
 VCOORD   = pres
 SNFILE   = uair
 COLORS   = 6;2;5;3;18
 MAP      = 1
 MSCALE   = 0
 LATLON   =  
 TITLE    = 1
 CLEAR    = yes
 PANEL    = 0
 DEVICE   = xw
 PROJ     = STR/90;-100;0
 FILTER   = no
 TEXT     = 0.75
 LUTFIL   =  
 STNPLT   =  
</code></pre>

<p><img src="snmap1.gif" alt="image" /></p>

<p><a name="4.5"></a></p>

<h2>Exercise #5 (More Advanced Parameters)</h2>

<p>At a height of 500 mb and at 1200 UTC, plot the lifted index (multiplied by 10) and temperatures of less than -15 degrees Celsius.</p>

<pre><code>SNPARM   =  mark:2;;tmpc&lt;-15;;hght;;;;;lift*10
DATTIM   =  1200
LEVELS   =  500
VCOORD   =  pres
SNFILE   =  uair
COLORS   =  2;5;3
FILTER   =  0
TEXT     =  .75
</code></pre>

<p><img src="snmap2.gif" alt="image" /></p>

<blockquote><p><a href=/gempak/tutorial/>GEMPAK Online Tutorial</a> | <a href="gpmap.html">Next: GPMAP Overview</a></p></blockquote>
<script src="/gempak/add_in.js" type="text/javascript"></script>
</body>
</html>
